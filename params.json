{
  "name": "Builder Vs Object Mother",
  "tagline": "",
  "body": "# Builder Vs Object Mother\r\n\r\nScope: Use builder pattern instead of object mother.\r\n\r\n\r\n## ObjectMother \r\nObjectMother starts with the factory pattern, by delivering prefabricated test-ready objects via a simple method call. \r\n\r\nSome reasons to use ObjectMother:\r\n- Reduce code duplication in tests, increasing test maintainability\r\n- Make test objects super-easily accessible, encouraging developers to write more tests.\r\n- Every test runs with fresh data.\r\n- Tests always clean up after themselves.\r\n\r\n``` \r\npublic class UsersOM {\r\n\r\n    public static User aRegularUser() {\r\n        return new User(\"Eugeniu\", \"Cararus\", \"ROLE_USER\");\r\n    }\r\n\r\n\tpublic static User aPriviledgedUser() {\r\n        return new User(\"Martin\", \"Bosh\", \"ROLE_SUPER_USER\");\r\n    }\r\n\r\n    // other factory methods\r\n\r\n}\r\n\r\npublic class RoleServiceTest{\r\n\t\r\n\t@Test\r\n\tpublic void shouldExecuteSuFromRegularUser(){\r\n\t\tUser regularUser = UsersOM.aRegularUser();\r\n\t\tUser superUser = UsersOM.aPriviledgedUser();\r\n\t\t// The SUT.\r\n\t}\t\r\n}\r\n\r\n``` \r\nThe problem whith this kind of aproache commes when the User object is complex and combination of users to be created for different scenatios is big, by keeping creating Object Mother the menatinance and cleanning of OMother is bigger chalenge than the value which it brings for tests.\r\n\r\n## Test Data Builder\r\nTest Data builder starts with [Builder pattern](https://cararuseugeniu.blogspot.co.uk/p/design-patterns-in-images.html) to create objects in Unit Tests. \r\nThe TestDataBuilder pattern allows tests to specify only those parts of the objects that need to vary and use sensible defaults for those that are not relevant to the test.\r\n\r\n``` \r\npublic class UserBuilder {\r\n\r\n    public static final String DEFAULT_FIRSTNAME = \"Eugeniu\";\r\n    public static final String DEFAULT_SURNAME = \"Cararus\";\r\n    public static final String DEFAULT_ROLE = \"ROLE_USER\";\r\n\r\n    private String firstname = DEFAULT_FIRSTNAME;\r\n    private String surname = DEFAULT_SURNAME;\r\n    private String role = DEFAULT_ROLE;\r\n    \r\n    private UserBuilder() {\r\n    }\r\n\r\n    public static UserBuilder aUser() {\r\n        return new UserBuilder();\r\n    }\r\n\r\n    public UserBuilder withFirstname(String firstname) {\r\n        this.firstname = firstname;\r\n        return this;\r\n    }\r\n\r\n    public UserBuilder withSurname(String surname) {\r\n        this.surname = surname;\r\n        return this;\r\n    }\r\n\r\n    public UserBuilder withNoSurname() {\r\n        this.surname = null;\r\n        return this;\r\n    }\r\n\r\n    public UserBuilder inRegularUser() {\r\n        this.role = \"ROLE_USER\";\r\n        return this;\r\n    }\r\n\r\n    public UserBuilder inPriviledgedUser() {\r\n        this.role = \"ROLE_ADMIN\";\r\n        return this;\r\n    }\r\n\r\n    public UserBuilder inRole(String role) {\r\n        this.role = role;\r\n        return this;\r\n    }\r\n\r\n    public User build() {\r\n        return new User(firstname, surname, role);\r\n    }\r\n}\r\n\r\npublic class RoleServiceTest{\r\n\t\r\n\t@Test\r\n\tpublic void shouldExecuteSuFromRegularUser(){\r\n\t\tUser regularUser = UserBuilder.build();\r\n\t\tUser superUser = UserBuilder.withFirstname(\"Martin\").withSurname(\"Bosh\").inPriviledgedUser().build();\r\n\t\t// The SUT.\r\n\t}\t\r\n}\r\n``` \r\n\r\n## Useful links: \r\n* http://c2.com/cgi/wiki?ObjectMother\r\n* http://c2.com/cgi/wiki?TestDataBuilder\r\n\r\n## DISCLAIMER:\r\nPurpose of project is only educational.\r\nThis project should not be used for any commercial purpose.\r\nThis work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.\r\nhttp://creativecommons.org/licenses/by-nc-sa/4.0/.\r\n\r\n## Author:\r\nEugeniu Cararus\r\ncararuseugeniu@gmail.com\r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}